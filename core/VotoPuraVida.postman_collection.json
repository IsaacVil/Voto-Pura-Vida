{
	"info": {
		"_postman_id": "bf573680-dc12-4ffc-b32b-70a1302860db",
		"name": "VotoPuraVida API Collection",
		"description": "Colecci√≥n completa de endpoints para Voto Pura Vida - Incluye endpoints ORM y Stored Procedures",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "45423572",
		"_collection_link": "https://danielarce.postman.co/workspace/Daniel-Arce's-Workspace~01e2d283-c0ee-4ca3-8e06-5d5e23e07f4a/collection/45423572-bf573680-dc12-4ffc-b32b-70a1302860db?action=share&source=collection_link&creator=45423572"
	},
	"item": [
		{
			"name": "üè• Health Checks",
			"item": [
				{
					"name": "API Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/api/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"api",
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "ORM Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/api/orm/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"api",
								"orm",
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "Stored Procedures Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/api/stored-procedures/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"api",
								"stored-procedures",
								"health"
							]
						}
					},
					"response": []
				}
			],
			"description": "Endpoints para verificar el estado de la API"
		},
		{
			"name": "üó≥Ô∏è ORM Endpoints",
			"item": [
				{
					"name": "üí∞ Votaci√≥n",
					"item": [
						{
							"name": "Procesar Voto",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 2,\n  \"optionid\": 3,\n  \"questionid\": 2,\n  \"mfaToken\": \"token_123456\",\n  \"mfaCode\": \"123456\",\n  \"biometricData\": \"biometric_sample_data_hash_abc123def456\",\n  \"clientIP\": \"192.168.1.100\",\n  \"userAgent\": \"PostmanRuntime/7.32.3\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Obtener Opciones de Votaci√≥n",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/orm/votar?proposalid=2",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									],
									"query": [
										{
											"key": "proposalid",
											"value": "2",
											"description": "ID de la propuesta"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "‚öôÔ∏è Configuraci√≥n de Votaci√≥n",
					"item": [
						{
							"name": "Obtener Datos de Configuraci√≥n",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/orm/configurarVotacion?proposalid=1&type=setup-data",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"configurarVotacion"
									],
									"query": [
										{
											"key": "proposalid",
											"value": "1",
											"description": "ID de la propuesta"
										},
										{
											"key": "type",
											"value": "setup-data",
											"description": "Tipo de datos a obtener"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Crear Configuraci√≥n",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 2,\n  \"userid\": 1,\n  \"startdate\": \"2025-06-15T09:00:00.000Z\",\n  \"enddate\": \"2025-06-30T18:00:00.000Z\",\n  \"votingtypeId\": 1,\n  \"allowweightedvotes\": false,\n  \"requiresallvoters\": false,\n  \"notificationmethodid\": 1,\n  \"publicVoting\": true,\n  \"preguntas\": [\n    {\n      \"question\": \"¬øEst√°s de acuerdo con esta propuesta?\",\n      \"questionTypeId\": 1\n    }\n  ],\n  \"opciones\": [\n    {\n      \"optiontext\": \"S√≠, estoy de acuerdo\",\n      \"questionIndex\": 0\n    },\n    {\n      \"optiontext\": \"No, no estoy de acuerdo\",\n      \"questionIndex\": 0\n    }\n  ],\n  \"segmentosObjetivo\": [\n    {\n      \"segmentid\": 1,\n      \"voteweight\": 1.0\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/configurarVotacion",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"configurarVotacion"
									]
								}
							},
							"response": []
						},
						{
							"name": "Actualizar Configuraci√≥n",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 1,\n  \"userid\": 1,\n  \"startdate\": \"2025-06-16T09:00:00.000Z\",\n  \"enddate\": \"2025-07-01T18:00:00.000Z\",\n  \"votingtypeId\": 1,\n  \"allowweightedvotes\": false,\n  \"requiresallvoters\": false,\n  \"notificationmethodid\": 1,\n  \"publicVoting\": true,\n  \"preguntas\": [\n    {\n      \"question\": \"¬øEst√°s de acuerdo con esta propuesta actualizada?\",\n      \"questionTypeId\": 1\n    }\n  ],\n  \"opciones\": [\n    {\n      \"optiontext\": \"S√≠, estoy de acuerdo\",\n      \"questionIndex\": 0,\n      \"questionId\": 1\n    },\n    {\n      \"optiontext\": \"No, no estoy de acuerdo\",\n      \"questionIndex\": 0,\n      \"questionId\": 1\n    },\n    {\n      \"optiontext\": \"Me abstengo\",\n      \"questionIndex\": 0,\n      \"questionId\": 1\n    }\n  ],\n  \"segmentosObjetivo\": [\n    {\n      \"segmentid\": 1,\n      \"voteweight\": 1.0\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/configurarVotacion?votingconfigid=1",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"configurarVotacion"
									],
									"query": [
										{
											"key": "votingconfigid",
											"value": "1",
											"description": "ID de la configuraci√≥n a actualizar"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "üìÉ Listar Votaciones",
					"item": [
						{
							"name": "User V√°lido y Contrase√±a V√°lida",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 15,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/listarvotos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"listarvotos"
									]
								}
							},
							"response": []
						},
						{
							"name": "User V√°lido y Contrase√±a No V√°lida",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 15,\r\n  \"password\": \"contramala\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/listarvotos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"listarvotos"
									]
								}
							},
							"response": []
						},
						{
							"name": "User No V√°lido",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 4,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/listarvotos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"listarvotos"
									]
								}
							},
							"response": []
						},
						{
							"name": "User V√°lido y Sin Votes",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 110100100,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/listarvotos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"listarvotos"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "üí¨ Comentar",
					"item": [
						{
							"name": "Comentar V√°lido",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 1,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\",\r\n  \"commentData\": {\r\n    \"proposalid\": 5,\r\n    \"comment\": \"Hola, estoy troleando en este comentario -2-\"\r\n  },\r\n  \"documentos\": [\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo1.pdf\",\r\n      \"size\": 2,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 44100,\r\n      \"languagecode\": \"es\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": true,\r\n      \"validadocontenidoadjunto\": true,\r\n      \"needtobeencrypted\": false\r\n    },\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo2.pdf\",\r\n      \"size\": 5,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 48000,\r\n      \"languagecode\": \"en\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": true,\r\n      \"validadocontenidoadjunto\": true,\r\n      \"needtobeencrypted\": true\r\n    }\r\n  ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/comentar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"comentar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Comentario Rechazado (Estructura)",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 1,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\",\r\n  \"commentData\": {\r\n    \"proposalid\": 5,\r\n    \"comment\": \"Hola, estoy troleando en este comentario -2-\"\r\n  },\r\n  \"documentos\": [\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo1.pdf\",\r\n      \"size\": 2,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 44100,\r\n      \"languagecode\": \"es\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": false,\r\n      \"validadocontenidoadjunto\": true,\r\n      \"needtobeencrypted\": false\r\n    },\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo2.pdf\",\r\n      \"size\": 5,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 48000,\r\n      \"languagecode\": \"en\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": true,\r\n      \"validadocontenidoadjunto\": true,\r\n      \"needtobeencrypted\": true\r\n    }\r\n  ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/comentar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"comentar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Comentario Rechazado (Validacion de Contenido)",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 1,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\",\r\n  \"commentData\": {\r\n    \"proposalid\": 5,\r\n    \"comment\": \"Hola, estoy troleando en este comentario -2-\"\r\n  },\r\n  \"documentos\": [\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo1.pdf\",\r\n      \"size\": 2,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 44100,\r\n      \"languagecode\": \"es\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": true,\r\n      \"validadocontenidoadjunto\": false,\r\n      \"needtobeencrypted\": false\r\n    },\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo2.pdf\",\r\n      \"size\": 5,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 48000,\r\n      \"languagecode\": \"en\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": true,\r\n      \"validadocontenidoadjunto\": true,\r\n      \"needtobeencrypted\": true\r\n    }\r\n  ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/comentar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"comentar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Comentario Rechazado (Ambas)",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"userid\": 1,\r\n  \"password\": \"holasoylapasswordquenoseguardarianormalmente\",\r\n  \"commentData\": {\r\n    \"proposalid\": 5,\r\n    \"comment\": \"Hola, estoy troleando en este comentario -2-\"\r\n  },\r\n  \"documentos\": [\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo1.pdf\",\r\n      \"size\": 2,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 44100,\r\n      \"languagecode\": \"es\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": true,\r\n      \"validadocontenidoadjunto\": false,\r\n      \"needtobeencrypted\": false\r\n    },\r\n    {\r\n      \"url\": \"https://ejemplo.com/archivo2.pdf\",\r\n      \"size\": 5,\r\n      \"encoding\": \"utf-8\",\r\n      \"samplerate\": 48000,\r\n      \"languagecode\": \"en\",\r\n      \"mediatypeid\": 1,\r\n      \"validadoestructura\": false,\r\n      \"validadocontenidoadjunto\": false,\r\n      \"needtobeencrypted\": true\r\n    }\r\n  ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3001/api/orm/comentar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3001",
									"path": [
										"api",
										"orm",
										"comentar"
									]
								}
							},
							"response": []
						},
						{
							"name": "New Request",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": ""
								}
							},
							"response": []
						}
					]
				}
			],
			"description": "Endpoints que usan Prisma ORM para operaciones complejas"
		},
		{
			"name": "‚öôÔ∏è Stored Procedures",
			"item": [
				{
					"name": "üí∞ Inversi√≥n en Propuesta",
					"item": [
						{
							"name": "Procesar Inversi√≥n",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 3,\n  \"userid\": 10,\n  \"amount\": 500000.00,\n  \"investmentdate\": \"{{$isoTimestamp}}\",\n  \"paymentmethodid\": 2,\n  \"availablemethodid\": 1,\n  \"currencyid\": 1,\n  \"exchangerateid\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									]
								}
							},
							"response": []
						},
						{
							"name": "Validaci√≥n Campos Requeridos",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 1,\n  \"userid\": 2\n  // Faltan campos requeridos para probar validaci√≥n\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									]
								}
							},
							"response": []
						},
						{
							"name": "Validaci√≥n Monto Inv√°lido",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 1,\n  \"userid\": 2,\n  \"amount\": -1000,\n  \"investmentdate\": \"{{$isoTimestamp}}\",\n  \"paymentmethodid\": 1,\n  \"availablemethodid\": 1,\n  \"currencyid\": 1,\n  \"exchangerateid\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									]
								}
							},
							"response": []
						},
						{
							"name": "Obtener Info Inversiones",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta?proposalid=1",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									],
									"query": [
										{
											"key": "proposalid",
											"value": "1",
											"description": "ID de la propuesta (requerido)"
										},
										{
											"key": "userid",
											"value": "2",
											"description": "ID del usuario (opcional)",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Obtener Info Inversiones por Usuario",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta?proposalid=1&userid=2",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									],
									"query": [
										{
											"key": "proposalid",
											"value": "1",
											"description": "ID de la propuesta"
										},
										{
											"key": "userid",
											"value": "2",
											"description": "ID del usuario espec√≠fico"
										}
									]
								}
							},
							"response": []
						}
					],
					"description": "Endpoints para manejar inversiones usando SP PV_InvertirEnPropuesta"
				},
				{
					"name": "üíé Reparto de Dividendos",
					"item": [
						{
							"name": "Procesar Reparto Dividendos",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 3,\n  \"processedby\": 1,\n  \"paymentmethodid\": 1,\n  \"availablemethodid\": 4,\n  \"currencyid\": 1,\n  \"exchangerateid\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/repartirDividendos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"repartirDividendos"
									]
								}
							},
							"response": []
						},
						{
							"name": "Validaci√≥n Campos Requeridos",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 1\n  // Faltan campos requeridos para probar validaci√≥n\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/repartirDividendos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"repartirDividendos"
									]
								}
							},
							"response": []
						},
						{
							"name": "Usuario Sin Permisos",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"proposalid\": 1,\n  \"processedby\": 999,\n  \"paymentmethodid\": 1,\n  \"availablemethodid\": 1,\n  \"currencyid\": 1,\n  \"exchangerateid\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/repartirDividendos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"repartirDividendos"
									]
								}
							},
							"response": []
						},
						{
							"name": "Obtener Info Dividendos",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/repartirDividendos?proposalid=1",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"repartirDividendos"
									],
									"query": [
										{
											"key": "proposalid",
											"value": "1",
											"description": "ID de la propuesta (requerido)"
										},
										{
											"key": "reportid",
											"value": "1",
											"description": "ID del reporte financiero (opcional)",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Obtener Info Dividendos por Reporte",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/repartirDividendos?proposalid=1&reportid=1",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"repartirDividendos"
									],
									"query": [
										{
											"key": "proposalid",
											"value": "1",
											"description": "ID de la propuesta"
										},
										{
											"key": "reportid",
											"value": "1",
											"description": "ID del reporte financiero espec√≠fico"
										}
									]
								}
							},
							"response": []
						}
					],
					"description": "Endpoints para manejar reparto de dividendos usando SP sp_PV_RepartirDividendos"
				},
				{
					"name": "üö´ M√©todos No Permitidos",
					"item": [
						{
							"name": "PUT en Inversi√≥n (405)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									]
								}
							},
							"response": []
						},
						{
							"name": "DELETE en Dividendos (405)",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/repartirDividendos",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"repartirDividendos"
									]
								}
							},
							"response": []
						},
						{
							"name": "PATCH en Inversi√≥n (405)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/stored-procedures/invertirEnPropuesta",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"stored-procedures",
										"invertirEnPropuesta"
									]
								}
							},
							"response": []
						}
					],
					"description": "Pruebas de validaci√≥n de m√©todos HTTP"
				},
				{
					"name": "CrearActualizar Propuesta",
					"item": [
						{
							"name": "Actualizar Propuesta",
							"request": {
								"method": "GET",
								"header": []
							},
							"response": []
						},
						{
							"name": "Crear Propuesta",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"title\": \"Renovaci√≥n del Parque Central\",\r\n  \"description\": \"Proyecto de renovaci√≥n integral del Parque Central de San Jos√©, incluyendo mejoras en infraestructura, √°reas verdes y espacios recreativos.\",\r\n  \"proposalcontent\": \"El proyecto contempla: 1) Renovaci√≥n de senderos peatonales, 2) Instalaci√≥n de nueva iluminaci√≥n LED, 3) Creaci√≥n de √°reas de juegos infantiles, 4) Mejora del sistema de riego, 5) Plantaci√≥n de √°rboles nativos.\",\r\n  \"budget\": 50000000.00,\r\n  \"createdby\": 1,\r\n  \"proposaltypeid\": 1,\r\n  \"organizationid\": 1,\r\n  \"version\": 1,\r\n  \"mediapath\": \"/uploads/cedula.pdf,/uploads/comprobante.pdf,/uploads/planos.dwg\",\r\n  \"mediatypeid\": \"1,2,3\",\r\n  \"sizeMB\": \"2,1,15\",\r\n  \"encoding\": \"UTF-8,UTF-8,ASCII\",\r\n  \"samplerate\": \"0,0,0\",\r\n  \"languagecode\": \"ES,ES,ES\",\r\n  \"documenttypeid\": \"1,2,3\",\r\n  \"changecomments\": \"Propuesta inicial - versi√≥n 1.0\",\r\n  \"targetSegments\": \"Adultos,J√≥venes,Familias\",\r\n  \"segmentWeights\": \"0.40,0.35,0.25\",\r\n  \"startdate\": \"2025-07-01T08:00:00.000Z\",\r\n  \"enddate\": \"2025-07-15T18:00:00.000Z\",\r\n  \"votingtypeid\": 1,\r\n  \"allowweightedvotes\": true,\r\n  \"requiresallvoters\": false,\r\n  \"notificationmethodid\": 1,\r\n  \"publisheddate\": \"2025-06-20T09:00:00.000Z\",\r\n  \"finalizeddate\": \"2025-08-20T09:00:00.000Z\",\r\n  \"publicvoting\": true\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{apiBase}}/crearActualizarPropuesta",
									"host": [
										"{{apiBase}}"
									],
									"path": [
										"crearActualizarPropuesta"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Actualizar Propuesta",
					"item": [
						{
							"name": "Propuesta antes Revisi√≥n",
							"request": {
								"method": "GET",
								"header": []
							},
							"response": []
						},
						{
							"name": "Revisar Propuesta",
							"request": {
								"method": "GET",
								"header": []
							},
							"response": []
						},
						{
							"name": "Propuesta despues Revisi√≥n",
							"request": {
								"method": "GET",
								"header": []
							},
							"response": []
						}
					]
				}
			],
			"description": "Endpoints que llaman directamente a stored procedures de SQL Server"
		},
		{
			"name": "üîê MFA Validation Tests",
			"item": [
				{
					"name": "TOTP Validation",
					"item": [
						{
							"name": "Valid TOTP Code",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 10,\n  \"proposalid\": 3,\n  \"optionid\": 7,\n  \"questionid\": 3,\n  \"mfaToken\": \"totp_token_test\",\n  \"mfaCode\": \"DEV123\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Valid TOTP Code - TEST01",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"totp_token_sample\",\n  \"mfaCode\": \"TEST01\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Valid TOTP Code - ADMIN9",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"totp_token_sample\",\n  \"mfaCode\": \"ADMIN9\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Basic Dev Code - 123456",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"totp_token_sample\",\n  \"mfaCode\": \"123456\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Invalid TOTP Code - Too Short",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"totp_token_sample\",\n  \"mfaCode\": \"123\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "SMS Validation",
					"item": [
						{
							"name": "Valid SMS Code",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 11,\n  \"proposalid\": 4,\n  \"optionid\": 9,\n  \"questionid\": 4,\n  \"mfaToken\": \"sms_token_test\",\n  \"mfaCode\": \"TEST01\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Invalid SMS Code - Non-numeric",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"sms_token_987654\",\n  \"mfaCode\": \"abcdef\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Email Validation",
					"item": [
						{
							"name": "Valid Email Code",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 12,\n  \"proposalid\": 5,\n  \"optionid\": 12,\n  \"questionid\": 5,\n  \"mfaToken\": \"email_token_test\",\n  \"mfaCode\": \"ADMIN9\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Invalid Email Code - Empty",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"email_token_456789\",\n  \"mfaCode\": \"\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"sample_biometric_data\\\",\\\"confidence\\\":0.95}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-MFA-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Biometric Validation",
					"item": [
						{
							"name": "Valid Biometric Data",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"test_token\",\n  \"mfaCode\": \"123456\",\n  \"biometricData\": \"{\\\"type\\\":\\\"facial\\\",\\\"data\\\":\\\"high_quality_biometric_data\\\",\\\"confidence\\\":0.98,\\\"liveness\\\":true}\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-Biometric-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						},
						{
							"name": "Invalid Biometric Data - Empty",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"userid\": 1,\n  \"proposalid\": 1,\n  \"optionid\": 1,\n  \"questionid\": 1,\n  \"mfaToken\": \"test_token\",\n  \"mfaCode\": \"123456\",\n  \"biometricData\": \"\",\n  \"clientIP\": \"127.0.0.1\",\n  \"userAgent\": \"Postman-Biometric-Test\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:3000/api/orm/votar",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "3000",
									"path": [
										"api",
										"orm",
										"votar"
									]
								}
							},
							"response": []
						}
					]
				}
			],
			"description": "Pruebas espec√≠ficas para validaci√≥n de autenticaci√≥n multifactor"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3001",
			"type": "string"
		},
		{
			"key": "apiVersion",
			"value": "v1",
			"type": "string"
		}
	]
}